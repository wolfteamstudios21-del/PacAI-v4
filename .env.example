# PacAI v4/v5 Environment Variables
# Copy to .env.local (development) or set in Vercel/Replit secrets (production)

# ===== Database =====
# PostgreSQL connection (Neon recommended for cloud, local psql for dev)
DATABASE_URL="postgresql://user:password@localhost:5432/pacai"
PGHOST="localhost"
PGPORT="5432"
PGUSER="user"
PGPASSWORD="password"
PGDATABASE="pacai"

# ===== Authentication (v4) =====
# Dev credentials for local testing
DEV_USERNAME="WolfTeamstudio2"
DEV_PASSWORD="AdminTeam15"

# Session & JWT
SESSION_SECRET="your-random-session-secret-key-min-32-chars"
NEXTAUTH_SECRET="your-nextauth-secret-key"
NEXTAUTH_URL="http://localhost:5000"

# ===== API Keys =====
# OpenAI (LLM fallback for world narration)
OPENAI_API_KEY="sk-proj-..."

# Upstash Redis (queue backend, rate limiting cache)
UPSTASH_REDIS_URL="https://..."

# ===== Tier Limits (gens/day) =====
TIER_FREE_LIMIT=2
TIER_CREATOR_LIMIT=100
TIER_LIFETIME_LIMIT=999999

# ===== Security (v5) =====
# Hardware Security Modules (Offline licensing)
HSM_PRIMARY="yubihsm2-device-id"            # YubiHSM2 primary slot
HSM_FALLBACK="nitrokey3-device-id"          # Nitrokey3 fallback
ED25519_PRIVKEY_PATH="./keys/dev_priv.pem"  # Dev signing key

# ===== Deployment =====
# Environment mode
NODE_ENV="development"  # or "production"

# Server port (Replit/Vercel will override)
PORT=5000

# Public URL (for OAuth redirects, email links, etc.)
VERCEL_URL="https://pacaiwolfstudio.com"

# ===== Frontend Configuration (Vercel) =====
# API URL for frontend to reach backend (Fly.io)
VITE_API_URL="https://pacai-v5.fly.dev"  # Set in Vercel → Settings → Environment Variables

# ===== Optional: Monitoring =====
# Sentry (error tracking)
SENTRY_DSN="https://..."

# ===== Optional: Cloud Sync =====
# For future multiplayer/collab features
SUPABASE_URL="https://..."
SUPABASE_KEY="eyJ..."

# ===== Optional: Payment (Future) =====
# Stripe webhook secret
STRIPE_SECRET_KEY="sk_live_..."
STRIPE_WEBHOOK_SECRET="whsec_..."

# ===== CRITICAL: Production Deployment Secrets =====
# REQUIRED for Replit Deployments / Fly.io
# Set these in: Deployment Configuration → Environment Variables

# Database connection (REQUIRED - production deployment will fail without this)
DATABASE_URL="postgresql://neon_user:password@db.neon.tech:5432/pacai_prod"

# Session security (REQUIRED)
SESSION_SECRET="your-production-session-secret-key-min-32-chars"
JWT_SECRET="your-production-jwt-secret-key-min-32-chars"

# Optional: OpenAI fallback LLM
OPENAI_API_KEY="sk-proj-..."

# ===== Deployment (Fly.io) =====
# WebSocket & API Server Port (Fly.io)
PORT="8080"

# Public API URL (for CORS, OAuth redirects)
PUBLIC_API_URL="https://pacai-v5.fly.dev"

# Fly.io Secrets (set via: flyctl secrets set KEY=VALUE)
# - DATABASE_URL: PostgreSQL connection string (REQUIRED)
# - JWT_SECRET: Session signing key (REQUIRED)
# - SESSION_SECRET: Express session encryption key (REQUIRED)
# - OPENAI_API_KEY: OpenAI API key for LLM fallback
# - HSM_PRIMARY: YubiHSM2 endpoint (if available)
# - HSM_FALLBACK: Nitrokey3 endpoint (if available)
