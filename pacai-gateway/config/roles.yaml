# config/roles.yaml
# PacAI v6.3 RBAC Role Definitions
# Load at gateway startup into memory; check requireHSM + check_permission(role, action) in middleware

roles:
  admin:
    description: "Full system admin. Can generate, export, manage licenses, and override."
    permissions:
      - generate
      - export
      - override
      - project:create
      - project:read
      - project:update
      - project:delete
      - license:manage
      - audit:read
      - users:manage
      - system:configure
    limits:
      generations_per_week: unlimited
      exports_per_day: unlimited
      max_projects: unlimited

  operator:
    description: "Operator / instructor. Can generate, override and view usage."
    permissions:
      - generate
      - override
      - project:read
      - project:update
      - export
      - audit:read
    limits:
      generations_per_week: 500
      exports_per_day: 100
      max_projects: 50

  creator:
    description: "Creator/studio role. Can generate & export, but not manage licenses."
    permissions:
      - generate
      - export
      - project:create
      - project:read
      - project:update
    limits:
      generations_per_week: 100
      exports_per_day: 50
      max_projects: 25
    features:
      - priority_queue
      - no_watermark
      - all_engines

  demo:
    description: "Limited demo user â€” small quota, throttled"
    permissions:
      - generate
      - project:read
    limits:
      generations_per_week: 2
      exports_per_day: 1
      max_projects: 3
    features:
      - watermarked_exports

  auditor:
    description: "Read-only access to audit trail and exports for compliance."
    permissions:
      - audit:read
      - project:read
    limits:
      generations_per_week: 0
      exports_per_day: 0
      max_projects: 0

permissions:
  - name: generate
    description: Create new worlds and narratives
    
  - name: override
    description: Apply live behavior overrides
    
  - name: export
    description: Export to game engines
    
  - name: audit:read
    description: View audit logs
    
  - name: license:manage
    description: Manage license and seats
    
  - name: users:manage
    description: Create, update, delete users
    
  - name: project:create
    description: Create new projects
    
  - name: project:read
    description: View project details
    
  - name: project:update
    description: Modify project settings
    
  - name: project:delete
    description: Delete projects
    
  - name: system:configure
    description: System-level configuration
